<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Segment Tree Pattern - Software Systems Interview</title>
  <link rel="stylesheet" href="../styles.css">
</head>
<body>
  <div class="container">
    <aside class="sidebar">
      <div class="sidebar-header">
        <h1>üåë Software Systems</h1>
        <p>Coding Interview Prep</p>
      </div>
            <nav class="sidebar-nav">
        <a href="../index.html" class="nav-item">üè† Home Dashboard</a>
    
        <!-- Linear Data Structures -->
        <details class="nav-section">
          <summary class="nav-section-title">Linear Data Structures</summary>
          <a href="../linked-lists.html" class="nav-item">Linked Lists</a>
          <a href="../linked-list-reversal.html" class="nav-item indent">‚Ü≥ Visualizer: Reversal</a>
          <a href="../linked-list-visualizer.html" class="nav-item indent">‚Ü≥ Visualizer: Operations</a>
          <a href="../stack.html" class="nav-item">Stacks</a>
          <a href="../stack-visualizer.html" class="nav-item indent">‚Ü≥ Visualizer: Stack</a>
          <a href="../queues.html" class="nav-item">Queues</a>
          <a href="../queue-visualizer.html" class="nav-item indent">‚Ü≥ Visualizer: Queue</a>
        </details>
    
        <!-- Non-Linear Data Structures -->
        <details class="nav-section">
          <summary class="nav-section-title">Non-Linear Data Structures</summary>
          <a href="../hash-maps.html" class="nav-item">Hash Maps</a>
          <a href="../hash-map-visualizer.html" class="nav-item indent">‚Ü≥ Visualizer: Hash Map</a>
          <a href="../trees.html" class="nav-item">Trees</a>
          <a href="../bst-visualizer.html" class="nav-item indent">‚Ü≥ Visualizer: BST</a>
          <a href="../graphs.html" class="nav-item">Graphs</a>
          <a href="../graph-visualizer.html" class="nav-item indent">‚Ü≥ Visualizer: Graph Algo</a>
          <a href="../bfs-graph.html" class="nav-item indent">‚Ü≥ Visualizer: BFS</a>
          <a href="../pathfinding-visualizer.html" class="nav-item indent">‚Ü≥ Visualizer: Pathfinding</a>
          <a href="../topological-sort-visualizer.html" class="nav-item indent">‚Ü≥ Visualizer: Topo Sort</a>
          <a href="../mst-visualizer.html" class="nav-item indent">‚Ü≥ Visualizer: MST</a>
          <a href="../union-find.html" class="nav-item indent">‚Ü≥ Visualizer: Union-Find</a>
          <a href="../heap.html" class="nav-item">Heaps</a>
          <a href="../heap-visualizer.html" class="nav-item indent">‚Ü≥ Visualizer: Heap</a>
          <a href="../tries.html" class="nav-item">Tries</a>
          <a href="../trie-visualizer.html" class="nav-item indent">‚Ü≥ Visualizer: Trie</a>
          <a href="../segment-tree.html" class="nav-item">Segment Trees</a>
        </details>
    
        <!-- Algorithms -->
        <details class="nav-section">
          <summary class="nav-section-title">Algorithms</summary>
          <a href="../sort-search.html" class="nav-item">Sorting & Search</a>
          <a href="../sorting-visualizer.html" class="nav-item indent">‚Ü≥ Visualizer: Sorting</a>
          <a href="../binary-search-visualizer.html" class="nav-item indent">‚Ü≥ Visualizer: Binary Search</a>
          <a href="../dynamic-programming.html" class="nav-item">Dynamic Programming</a>
          <a href="../knapsack-dp.html" class="nav-item indent">‚Ü≥ Visualizer: Knapsack</a>
          <a href="../dp-lcs.html" class="nav-item indent">‚Ü≥ Visualizer: LCS</a>
          <a href="../backtracking.html" class="nav-item">Backtracking</a>
          <a href="../n-queens.html" class="nav-item indent">‚Ü≥ Visualizer: N-Queens</a>
          <a href="../sudoku-solver.html" class="nav-item indent">‚Ü≥ Visualizer: Sudoku</a>
          <a href="../maze-generator.html" class="nav-item indent">‚Ü≥ Visualizer: Maze</a>
          <a href="../greedy.html" class="nav-item">Greedy</a>
          <a href="../bit-manipulation.html" class="nav-item">Bit Manipulation</a>
          <a href="../math-geometry.html" class="nav-item">Math & Geometry</a>
        </details>

        <!-- Patterns -->
        <details class="nav-section">
          <summary class="nav-section-title">Patterns</summary>
          <a href="../two-pointers.html" class="nav-item">Two Pointers</a>
          <a href="../two-pointers-visualizer.html" class="nav-item indent">‚Ü≥ Visualizer: Two Pointers</a>
          <a href="../sliding-window.html" class="nav-item">Sliding Window</a>
          <a href="../sliding-window-visualizer.html" class="nav-item indent">‚Ü≥ Visualizer: Sliding Window</a>
          <a href="../fast-slow-pointers.html" class="nav-item">Fast & Slow Pointers</a>
          <a href="../binary-search.html" class="nav-item">Binary Search</a>
          <a href="../intervals.html" class="nav-item">Intervals</a>
          <a href="../prefix-sum.html" class="nav-item">Prefix Sum</a>
        </details>
    
        <!-- System Design -->
        <details class="nav-section">
          <summary class="nav-section-title">System Design</summary>
          <a href="../system-design.html" class="nav-item">System Design Basics</a>
          <a href="../system-design-masterclass.html" class="nav-item">Masterclass (Part 1)</a>
          <a href="../system-design-patterns.html" class="nav-item">System Design Patterns</a>
          <a href="../system-design-checklist.html" class="nav-item">System Design Checklist</a>
          <a href="../system-design-case-studies.html" class="nav-item">Case Studies</a>
          <a href="../system-design-quiz.html" class="nav-item">System Design Quiz</a>
        </details>

        <!-- Guides & Tools -->
        <details class="nav-section">
          <summary class="nav-section-title">Guides & Tools</summary>
          <a href="../pattern-recognition-guide.html" class="nav-item">Pattern Recognition</a>
          <a href="../interview-approach.html" class="nav-item">Interview Approach</a>
          <a href="../complexity-guide.html" class="nav-item">Complexity Analysis</a>
          <a href="../dsa-roadmap.html" class="nav-item">DSA Roadmap</a>
          <a href="../mock-interview-checklist.html" class="nav-item">Mock Interview Checklist</a>
          <a href="../cs-fundamentals.html" class="nav-item">CS Fundamentals</a>
          <a href="../golang-guide.html" class="nav-item">Go Language Guide</a>
          <a href="../osi-layers.html" class="nav-item">OSI Model Deep Dive</a>
          <a href="../tcp-ip-model.html" class="nav-item">TCP/IP Model Deep Dive</a>
          <a href="../go-interview-questions.html" class="nav-item">Go Interview Questions</a>
          <a href="../google-interview-questions.html" class="nav-item">Google Interview Questions</a>
          <a href="../amazon-two-pointers-questions.html" class="nav-item">Top Tech Two Pointers Questions</a>
          <a href="../go-interview-plan.html" class="nav-item">üìÖ 14-Day Interview Plan</a>
          <a href="../google-roadmap.html" class="nav-item">üó∫Ô∏è Google Roadmap</a>
          <a href="../cheat-sheet.html" class="nav-item">Pattern Cheat Sheet</a>
          <a href="../dashboard.html" class="nav-item">üìä My Dashboard</a>
          <a href="../visualizer-dashboard.html" class="nav-item">üé® Visualizer Dashboard</a>
          <a href="../mobile-access.html" class="nav-item">üì± Mobile Access</a>
        </details>
      </nav>
    </aside>

    <main class="main-content">
      <div class="content-header">
        <h1>Segment Tree & Fenwick Tree</h1>
        <p>Advanced structures for efficient range queries and updates.</p>
      </div>

      <div class="section">
        <div class="section-title">üîç Pattern Identification</div>
        <div class="callout" style="border-left-color: #f59e0b;">
          <div class="callout-title">When to use Segment Trees?</div>
          <div class="callout-content">
            <ul>
              <li><strong>Input:</strong> An array of numbers.</li>
              <li><strong>Operations:</strong> Frequent <strong>Range Queries</strong> (e.g., sum, min, max between index L and R) AND frequent <strong>Point/Range Updates</strong>.</li>
              <li><strong>Constraint:</strong> O(n) is too slow for queries. You need O(log n).</li>
            </ul>
          </div>
        </div>
      </div>

      <div class="section">
        <div class="section-title">üß† Core Concept</div>
        <p>A <strong>Segment Tree</strong> is a binary tree where each node represents an interval. The root represents the whole array <code>[0, n-1]</code>. Each child represents half of the parent's interval.</p>
        
        <div class="diagram">
Array: [1, 3, 5, 7]

        [0-3] (Sum=16)
       /             \
   [0-1] (4)       [2-3] (12)
   /     \         /      \
[0] (1) [1] (3)  [2] (5)  [3] (7)
        </div>
        
        <p><strong>Fenwick Tree (Binary Indexed Tree):</strong> A more compact array-based structure that supports prefix sums and updates in O(log n). Easier to implement but less flexible than Segment Trees (mostly for sums).</p>
      </div>

      <div class="section">
        <div class="section-title">üß© Canonical Problem: Range Sum Query - Mutable</div>
        <div class="callout amazon-expects">
          <div class="callout-title">LeetCode 307</div>
          <div class="callout-content">
            <p>Given an integer array <code>nums</code>, handle multiple queries of the following types:</p>
            <ol>
              <li><code>Update(index, val)</code>: Updates the value of <code>nums[index]</code> to be <code>val</code>.</li>
              <li><code>SumRange(left, right)</code>: Returns the sum of the subarray <code>nums[left...right]</code>.</li>
            </ol>
          </div>
        </div>

        <div class="code-block"><pre>
type SegmentTree struct {
    tree []int
    n    int
}

func Constructor(nums []int) SegmentTree {
    n := len(nums)
    tree := make([]int, 2*n)
    
    // Build tree (leaves at end)
    for i := 0; i < n; i++ {
        tree[n+i] = nums[i]
    }
    // Build internal nodes
    for i := n - 1; i > 0; i-- {
        tree[i] = tree[2*i] + tree[2*i+1]
    }
    
    return SegmentTree{tree: tree, n: n}
}

func (st *SegmentTree) Update(index int, val int) {
    pos := index + st.n
    st.tree[pos] = val
    
    // Bubble up
    for pos > 0 {
        left, right := pos, pos
        if pos%2 == 0 {
            right = pos + 1
        } else {
            left = pos - 1
        }
        st.tree[pos/2] = st.tree[left] + st.tree[right]
        pos /= 2
    }
}

func (st *SegmentTree) SumRange(left int, right int) int {
    l, r := left + st.n, right + st.n
    sum := 0
    
    for l <= r {
        if l%2 == 1 {
            sum += st.tree[l]
            l++
        }
        if r%2 == 0 {
            sum += st.tree[r]
            r--
        }
        l /= 2
        r /= 2
    }
    return sum
}</pre></div>
      </div>

      <div class="section">
        <div class="section-title">‚öôÔ∏è Complexity Analysis</div>
        <table class="complexity-table">
          <thead><tr><th>Operation</th><th>Time</th><th>Space</th></tr></thead>
          <tbody>
            <tr><td>Build Tree</td><td>O(n)</td><td>O(n)</td></tr>
            <tr><td>Update</td><td>O(log n)</td><td>O(1)</td></tr>
            <tr><td>Range Query</td><td>O(log n)</td><td>O(1)</td></tr>
          </tbody>
        </table>
      </div>

      <div class="section">
        <div class="section-title">üöÄ Advanced: Fenwick Tree (BIT)</div>
        <p>Best for Prefix Sums. Uses bit manipulation (<code>i & -i</code>) to traverse parents.</p>
        <div class="code-block"><pre>
type FenwickTree struct {
    tree []int
}

func NewFenwick(n int) *FenwickTree {
    return &FenwickTree{tree: make([]int, n+1)}
}

func (ft *FenwickTree) Add(i int, delta int) {
    i++ // 1-based indexing
    for i < len(ft.tree) {
        ft.tree[i] += delta
        i += i & -i
    }
}

func (ft *FenwickTree) Query(i int) int {
    i++
    sum := 0
    for i > 0 {
        sum += ft.tree[i]
        i -= i & -i
    }
    return sum
}</pre></div>
      </div>

    </main>
  </div>
  <script src="../script.js"></script>
</body>
</html>